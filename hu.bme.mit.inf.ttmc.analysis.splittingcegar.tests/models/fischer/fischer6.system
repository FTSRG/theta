specification MutualExclusion_check {

	property safe: {
		// delay
		input var d : real
		
		// normal variables
		global var lock : integer
		local var location1 : integer
		local var location2 : integer
		local var location3 : integer
		local var location4 : integer
		local var location5 : integer
		local var location6 : integer
				
		// clock variables
		local var c1 : real
		local var c2 : real
		local var c3 : real
		local var c4 : real
		local var c5 : real
		local var c6 : real

		// type invariants
		invariant lock >= 0
		invariant lock <= 6
		invariant location1 >= 0
		invariant location1 <= 3
		invariant location2 >= 0
		invariant location2 <= 3
		invariant location3 >= 0
		invariant location3 <= 3
		invariant location4 >= 0
		invariant location4 <= 3
		invariant location5 >= 0
		invariant location5 <= 3
		invariant location6 >= 0
		invariant location6 <= 3
		invariant c1 >= 0%1
		invariant c2 >= 0%1
		invariant c3 >= 0%1
		invariant c4 >= 0%1
		invariant c5 >= 0%1
		invariant c6 >= 0%1
		invariant d >= 0%1
		
		// normal invariants
		invariant location1 = 1 imply c1 + d <= 1%1
		invariant location2 = 1 imply c2 + d <= 1%1
		invariant location3 = 1 imply c3 + d <= 1%1
		invariant location4 = 1 imply c4 + d <= 1%1
		invariant location5 = 1 imply c5 + d <= 1%1
		invariant location6 = 1 imply c6 + d <= 1%1

		initial lock = 0
		initial location1 = 0
		initial location2 = 0
		initial location3 = 0
		initial location4 = 0
		initial location5 = 0
		initial location6 = 0
		initial c1 = 0%1
		initial c2 = 0%1
		initial c3 = 0%1
		initial c4 = 0%1
		initial c5 = 0%1
		initial c6 = 0%1

		transition (
			location1 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = 1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = 0%1 and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location1 = 1 and
			c1 + d <= 1%1 and
			lock' = 1 and
			location1' = 2 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = 0%1 and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location1 = 2 and
			c1 + d >= 2%1 and
			lock /= 1 and
			lock' = lock and
			location1' = 0 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location1 = 2 and
			c1 + d >= 2%1 and
			lock = 1 and
			lock' = lock and
			location1' = 3 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location1 = 3 and
			lock' = 0 and
			location1' = 0 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location2 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = location1 and
			location2' = 1 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = 0%1 and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location2 = 1 and
			c2 + d <= 1%1 and
			lock' = 2 and
			location1' = location1 and
			location2' = 2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = 0%1 and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location2 = 2 and
			c2 + d >= 2%1 and
			lock /= 2 and
			lock' = lock and
			location1' = location1 and
			location2' = 0 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location2 = 2 and
			c2 + d >= 2%1 and
			lock = 2 and
			lock' = lock and
			location1' = location1 and
			location2' = 3 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location2 = 3 and
			lock' = 0 and
			location1' = location1 and
			location2' = 0 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location3 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = 1 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = 0%1 and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location3 = 1 and
			c3 + d <= 1%1 and
			lock' = 3 and
			location1' = location1 and
			location2' = location2 and
			location3' = 2 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = 0%1 and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location3 = 2 and
			c3 + d >= 2%1 and
			lock /= 3 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = 0 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location3 = 2 and
			c3 + d >= 2%1 and
			lock = 3 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = 3 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (	
			location3 = 3 and
			lock' = 0 and
			location1' = location1 and
			location2' = location2 and
			location3' = 0 and
			location4' = location4 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (		
			location4 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = 1 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = 0%1 and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location4 = 1 and 
			c4 + d <= 1%1 and
			lock' = 4 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = 2 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = 0%1 and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location4 = 2 and
			c4 + d >= 2%1 and
			lock /= 4 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = 0 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (	
			location4 = 2 and
			c4 + d >= 2%1 and
			lock = 4 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = 3 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location4 = 3 and
			lock' = 0 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = 0 and
			location5' = location5 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location5 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = 1 and
			location6' = location6 and
			c1' = 0%1 and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location5 = 1 and
			c5 + d <= 1%1 and
			lock' = 5 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = 2 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = 0%1 and
			c6' = c6 + d
		) or (
			location5 = 2 and
			c5 + d >= 2%1 and
			lock /= 5 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = 0 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location5 = 2 and
			c5 + d >= 2%1 and
			lock = 5 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = 3 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location5 = 3 and
			lock' = 0 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = 0 and
			location6' = location6 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location6 = 0 and
			lock = 0 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = 1 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = 0%1
		) or (
			location6 = 1 and
			c6 + d <= 1%1 and
			lock' = 6 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = 2 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = 0%1
		) or (
			location6 = 2 and
			c6 + d >= 2%1 and
			lock /= 6 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = 0 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location6 = 2 and
			c6 + d >= 2%1 and
			lock = 6 and
			lock' = lock and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = 3 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		) or (
			location6 = 3 and
			lock' = 0 and
			location1' = location1 and
			location2' = location2 and
			location3' = location3 and
			location4' = location4 and
			location5' = location5 and
			location6' = 0 and
			c1' = c1 + d and
			c2' = c2 + d and
			c3' = c3 + d and
			c4' = c4 + d and
			c5' = c5 + d and
			c6' = c6 + d
		)
	} models 
		G(location1 /= 3 or location2 /= 3 or location3 /= 3 or location4 /= 3 or location5 /= 3 or location6 /= 3)
	
}